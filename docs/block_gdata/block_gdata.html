<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs For Class block_gdata</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="class-name">Class block_gdata</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
													<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
						|											<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
					</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Google Data block class definition</p>
<p class="description"><p>Development plans:</p><p>Right now, this block is focused  primarily on the Google Apps Provisioning  API and syncing Moodle user accounts  to Google.  If more integrations  with Google Services are added, then  this block will need to be re-organized  to be more of a plugin system that houses  all of the integrated Google Services.</p></p>
	<ul class="tags">
				<li><span class="field">author:</span> Mark Nielsen</li>
				<li><span class="field">version:</span> $Id$</li>
			</ul>
		<p class="notes">
			Located in <a class="field" href="_porting---gdata---block_gdata.php.html">/porting/gdata/block_gdata.php</a> (line <span class="field">42</span>)
		</p>
		
				
		<pre>block_list
   |
   --block_gdata</pre>
	
			</div>
</div>



	<a name="sec-var-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Variable Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
						<span class="disabled">Vars</span> (<a href="#sec-vars">details</a>)
							| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
								</div>
		<div class="info-box-body">
			<div class="var-summary">
																								<div class="var-title">
					<span class="var-type">string</span>
					<a href="#$hook" title="details" class="var-name">$hook</a>
				</div>
											</div>
		</div>
	</div>

	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
																		<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
				 
				|
						<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
																																																																																																																																																																																																														
				<div class="method-definition">
											<span class="method-result">string</span>
										<a href="#addusers_display" title="details" class="method-name">addusers_display</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#addusers_process" title="details" class="method-name">addusers_process</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">array</span>
										<a href="#applicable_formats" title="details" class="method-name">applicable_formats</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">boolean</span>
										<a href="#before_delete" title="details" class="method-name">before_delete</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">string</span>
										<a href="#buffer" title="details" class="method-name">buffer</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span>, <span class="var-type">mixed</span>&nbsp;<span class="var-name">$argX</span>)
									</div>
														
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#cleanadmins_display" title="details" class="method-name">cleanadmins_display</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#cleanadmins_process" title="details" class="method-name">cleanadmins_process</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#clean_admins_from_sync" title="details" class="method-name">clean_admins_from_sync</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">user_filtering</span>
										<a href="#create_filter" title="details" class="method-name">create_filter</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$hook</span>, [<span class="var-type">int</span>&nbsp;<span class="var-name">$pagesize</span> = <span class="var-default">50</span>])
									</div>
														
				<div class="method-definition">
											<span class="method-result">boolean</span>
										<a href="#cron" title="details" class="method-name">cron</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">boolean</span>
										<a href="#cron_alt" title="details" class="method-name">cron_alt</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">string</span>
										<a href="#display_user_table" title="details" class="method-name">display_user_table</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$hook</span>)
									</div>
														
				<div class="method-definition">
											<span class="method-result">object</span>
										<a href="#get_content" title="details" class="method-name">get_content</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">array</span>
										<a href="#get_sql" title="details" class="method-name">get_sql</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$hook</span>, [<span class="var-type">user_filtering</span>&nbsp;<span class="var-name">$filter</span> = <span class="var-default">NULL</span>])
									</div>
														
				<div class="method-definition">
											<span class="method-result">boolean</span>
										<a href="#has_capability" title="details" class="method-name">has_capability</a>
											([<span class="var-type">boolean</span>&nbsp;<span class="var-name">$required</span> = <span class="var-default">false</span>])
									</div>
														
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#has_config" title="details" class="method-name">has_config</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#init" title="details" class="method-name">init</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#print_footer" title="details" class="method-name">print_footer</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#print_header" title="details" class="method-name">print_header</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">string</span>
										<a href="#status_display" title="details" class="method-name">status_display</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">string</span>
										<a href="#users_display" title="details" class="method-name">users_display</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#users_process" title="details" class="method-name">users_process</a>
										()
									</div>
														
				<div class="method-definition">
											<span class="method-result">boolean</span>
										<a href="#user_can_addto" title="details" class="method-name">user_can_addto</a>
											(<span class="var-type"></span>&nbsp;<span class="var-name">$page</span>)
									</div>
														
				<div class="method-definition">
											<span class="method-result">void</span>
										<a href="#view" title="details" class="method-name">view</a>
										()
									</div>
											</div>
		</div>
	</div>		

	<a name="sec-vars"></a>
	<div class="info-box">
		<div class="info-box-title">Variables</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
										<a href="#sec-var-summary">Vars</a> (<span class="disabled">details</span>)
						
			
										| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			
<a name="var$hook" id="$hook"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<span class="var-title">
			<span class="var-type">string</span>
			<span class="var-name">$hook</span>
			 = <span class="var-default"> 'status'</span>			(line <span class="line-number">49</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Current hook being handled</p>
	
	
		
		

</div>
						
		</div>
	</div>
	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
															<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
																	<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>
<a name="methodaddusers_display" id="addusers_display"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">addusers_display</span> (line <span class="line-number">467</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Addusers hook - displays users  that can be added to the sync to Google Apps</p>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			addusers_display
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodaddusers_process" id="addusers_process"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">addusers_process</span> (line <span class="line-number">424</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Addusers hook - processes the  submit from addusers_display()</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			addusers_process
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodapplicable_formats" id="applicable_formats"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">applicable_formats</span> (line <span class="line-number">113</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Only allow block to be added to  site and admin pages</p>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			applicable_formats
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodbefore_delete" id="before_delete"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">before_delete</span> (line <span class="line-number">131</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Any cleanup necessary when the block is deleted</p>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			before_delete
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodbuffer" id="buffer"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">buffer</span> (line <span class="line-number">334</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Assists with calling functions that do no return output</p>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			buffer
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$callback</span>, <span class="var-type">mixed</span>&nbsp;<span class="var-name">$argX</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$callback</span><span class="var-description">: First param is a callback</span>			</li>
					<li>
				<span class="var-type">mixed</span>
				<span class="var-name">$argX</span><span class="var-description">: Keep passing arguments to pass to the callback</span>			</li>
				</ul>
		
			
	</div>
<a name="methodcleanadmins_display" id="cleanadmins_display"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">cleanadmins_display</span> (line <span class="line-number">688</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Hook defined so that process will get called</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			cleanadmins_display
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodcleanadmins_process" id="cleanadmins_process"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">cleanadmins_process</span> (line <span class="line-number">678</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Hook to simply clean admins and redirect back</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			cleanadmins_process
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodclean_admins_from_sync" id="clean_admins_from_sync"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">clean_admins_from_sync</span> (line <span class="line-number">666</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">User to clean admins from the sync table  if they are already in sync.</p>
<p class="description"><p>This function is meant to be run manually and so  it will only be run a few times.</p></p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			clean_admins_from_sync
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodcreate_filter" id="create_filter"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">create_filter</span> (line <span class="line-number">582</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Create the user filter</p>
	
	<div class="method-signature">
		<span class="method-result">user_filtering</span>
		<span class="method-name">
			create_filter
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$hook</span>, [<span class="var-type">int</span>&nbsp;<span class="var-name">$pagesize</span> = <span class="var-default">50</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$hook</span><span class="var-description">: The calling hook</span>			</li>
					<li>
				<span class="var-type">int</span>
				<span class="var-name">$pagesize</span><span class="var-description">: Page size</span>			</li>
				</ul>
		
			
	</div>
<a name="methodcron" id="cron"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">cron</span> (line <span class="line-number">140</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Block cron hook</p>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			cron
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodcron_alt" id="cron_alt"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">cron_alt</span> (line <span class="line-number">151</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Actual cron method</p>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			cron_alt
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methoddisplay_user_table" id="display_user_table"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">display_user_table</span> (line <span class="line-number">481</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Helper method, displays a table  of users with checkboxes next to them.</p>
<p class="description"><p>Also includes a submit button to take  action on those users.</p></p>
	<ul class="tags">
				<li><span class="field">todo:</span> Not in love with this method, but it works</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			display_user_table
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$hook</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$hook</span><span class="var-description">: The calling hook</span>			</li>
				</ul>
		
			
	</div>
<a name="methodget_content" id="get_content"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">get_content</span> (line <span class="line-number">72</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Block content contains a list  of links to the various admin  screens of the block</p>
	
	<div class="method-signature">
		<span class="method-result">object</span>
		<span class="method-name">
			get_content
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodget_sql" id="get_sql"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">get_sql</span> (line <span class="line-number">601</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Generate SQL for querying user view  data</p>
<p class="description"><p>All queries must return id, username and  password fields from the user table.</p></p>
	
	<div class="method-signature">
		<span class="method-result">array</span>
		<span class="method-name">
			get_sql
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$hook</span>, [<span class="var-type">user_filtering</span>&nbsp;<span class="var-name">$filter</span> = <span class="var-default">NULL</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$hook</span><span class="var-description">: The calling hook</span>			</li>
					<li>
				<span class="var-type">user_filtering</span>
				<span class="var-name">$filter</span><span class="var-description">: User filter form</span>			</li>
				</ul>
		
			
	</div>
<a name="methodhas_capability" id="has_capability"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">has_capability</span> (line <span class="line-number">217</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Called Statically</p>
<p class="description"><p>Does the current user have  the capability to use this  block and its features?</p><p>May change, so using this method</p></p>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			has_capability
		</span>
					([<span class="var-type">boolean</span>&nbsp;<span class="var-name">$required</span> = <span class="var-default">false</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">boolean</span>
				<span class="var-name">$required</span><span class="var-description">: Require the capability (throws error if is user does not have)</span>			</li>
				</ul>
		
			
	</div>
<a name="methodhas_config" id="has_config"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">has_config</span> (line <span class="line-number">61</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			has_config
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodinit" id="init"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">init</span> (line <span class="line-number">56</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Title and version</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			init
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodprint_footer" id="print_footer"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">print_footer</span> (line <span class="line-number">321</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Prints the footer - very simple right now</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			print_footer
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodprint_header" id="print_header"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">print_header</span> (line <span class="line-number">295</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Prints the header - very simple right now</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			print_header
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodstatus_display" id="status_display"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">status_display</span> (line <span class="line-number">352</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Status hook - display connection  status to Google Apps</p>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			status_display
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodusers_display" id="users_display"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">users_display</span> (line <span class="line-number">414</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Users hook - display the users  who are currently being synced  to Google Apps</p>
	
	<div class="method-signature">
		<span class="method-result">string</span>
		<span class="method-name">
			users_display
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methodusers_process" id="users_process"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">users_process</span> (line <span class="line-number">374</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Users hook - process submits from  users_display()</p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			users_process
		</span>
				()
			</div>
	
		
			
	</div>
<a name="methoduser_can_addto" id="user_can_addto"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">user_can_addto</span> (line <span class="line-number">122</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Can the user add the block to the page?</p>
	
	<div class="method-signature">
		<span class="method-result">boolean</span>
		<span class="method-name">
			user_can_addto
		</span>
					(<span class="var-type"></span>&nbsp;<span class="var-name">$page</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type"></span>
				<span class="var-name">$page</span>			</li>
				</ul>
		
			
	</div>
<a name="methodview" id="view"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">view</span> (line <span class="line-number">244</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">Serves up the different display and  process methods provided by this block.</p>
<p class="description"><p>Looks for the param &quot;hook&quot; and then  calls hook_process then hook_display</p><p>If hook_display returns anything, a  header and footer is printed around  the return value.  Any errors should  be thrown as blocks_gdata_exception  and will be caught by this method.</p></p>
	
	<div class="method-signature">
		<span class="method-result">void</span>
		<span class="method-name">
			view
		</span>
				()
			</div>
	
		
			
	</div>
						
		</div>
	</div>


	<p class="notes" id="credit">
		Documentation generated on Thu, 02 Sep 2010 15:02:27 -0700 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>